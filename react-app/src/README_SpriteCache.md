# –°–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø—Ä–∞–π—Ç–æ–≤\n\n–°–∏—Å—Ç–µ–º–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å–ø—Ä–∞–π—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º IndexDB –∏ Blob URLs.\n\n## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏\n\n‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–ø—Ä–∞–π—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ IndexDB  \n‚úÖ **Blob URL** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –±–µ–∑ Base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è  \n‚úÖ **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä—è–º—ã–µ URL –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö  \n‚úÖ **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** - –∏–∑–±–µ–≥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫ –æ–¥–Ω–æ–≥–æ —Å–ø—Ä–∞–π—Ç–∞  \n‚úÖ **React —Ö—É–∫–∏** - —É–¥–æ–±–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã  \n‚úÖ **Preloading** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å–ø—Ä–∞–π—Ç–æ–≤  \n‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–µ–º** - –º–µ—Ç–æ–¥—ã –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–µ—à–µ–º  \n\n## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã\n\n### UnnyObject (Backend)\n\n```typescript\n// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–π—Ç–∞ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º\nsprite.loadSprite((blobUrl) => {\n  if (blobUrl) {\n    // –ò—Å–ø–æ–ª—å–∑—É–µ–º blob URL\n    setImageSrc(blobUrl);\n  } else {\n    // Fallback –Ω–∞ –æ–±—ã—á–Ω—ã–π URL\n    setImageSrc(sprite.getFullUrl());\n  }\n});\n\n// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–π—Ç–æ–≤\nUnnyObject.preloadSprites([sprite1, sprite2, sprite3]);\n\n// –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞\nUnnyObject.clearSpriteCache();\n```\n\n### React —Ö—É–∫–∏\n\n#### useCachedSprite\n\n```typescript\nimport { useCachedSprite } from './hooks';\n\nconst MyComponent = ({ sprite }) => {\n  const { spriteUrl, isLoading, error } = useCachedSprite(sprite);\n  \n  return (\n    <div>\n      {isLoading && <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>}\n      {error && <div>‚ö†Ô∏è {error}</div>}\n      <img src={spriteUrl} alt=\"Sprite\" />\n    </div>\n  );\n};\n```\n\n#### usePreloadSprites\n\n```typescript\nimport { usePreloadSprites } from './hooks';\n\nconst GameLoader = ({ sprites }) => {\n  const { loadedCount, totalCount, progress, isComplete } = usePreloadSprites(sprites);\n  \n  return (\n    <div>\n      <div>–ó–∞–≥—Ä—É–∂–µ–Ω–æ: {loadedCount}/{totalCount}</div>\n      <div>–ü—Ä–æ–≥—Ä–µ—Å—Å: {Math.round(progress)}%</div>\n      {isComplete && <div>‚úÖ –ì–æ—Ç–æ–≤–æ!</div>}\n    </div>\n  );\n};\n```\n\n#### useSpriteCache\n\n```typescript\nimport { useSpriteCache } from './hooks';\n\nconst CacheManager = () => {\n  const { clearCache, preloadSprites } = useSpriteCache();\n  \n  return (\n    <div>\n      <button onClick={clearCache}>–û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à</button>\n      <button onClick={() => preloadSprites(importantSprites)}>\n        –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∞–∂–Ω—ã–µ —Å–ø—Ä–∞–π—Ç—ã\n      </button>\n    </div>\n  );\n};\n```\n\n### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã\n\n#### SpritePreloader\n\n```typescript\nimport { SpritePreloader } from './components';\n\nconst App = () => {\n  const [sprites, setSprites] = useState([]);\n  \n  return (\n    <div>\n      <SpritePreloader \n        sprites={sprites}\n        showProgress={true}\n        onComplete={() => console.log('–í—Å–µ —Å–ø—Ä–∞–π—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã!')}\n      />\n    </div>\n  );\n};\n```\n\n## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞\n\n### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö\n\n```\n1. React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–ø—Ä–∞–π—Ç\n   ‚Üì\n2. useCachedSprite –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–µ—à –≤ –ø–∞–º—è—Ç–∏\n   ‚Üì\n3. –ï—Å–ª–∏ –Ω–µ—Ç –≤ –∫–µ—à–µ ‚Üí UnnyObject.loadSprite()\n   ‚Üì\n4. C++ backend –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –≤ IndexDB\n   ‚Üì\n5. TypeScript –ø–æ–ª—É—á–∞–µ—Ç binary data –∏–∑ IndexDB\n   ‚Üì\n6. –°–æ–∑–¥–∞–µ—Ç—Å—è Blob URL –∏–∑ binary data\n   ‚Üì\n7. URL —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–µ—à –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è\n   ‚Üì\n8. React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ\n```\n\n### –¢–∏–ø—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è\n\n- **Memory Cache** - `Map<string, string>` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ Blob URLs\n- **IndexDB Cache** - –ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è\n- **Browser Cache** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Blob URLs –±—Ä–∞—É–∑–µ—Ä–æ–º\n\n## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏\n\n### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏\n\n1. **Preload –≤–∞–∂–Ω—ã—Ö —Å–ø—Ä–∞–π—Ç–æ–≤** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SpritePreloader** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ feedback\n3. **–û—á–∏—â–∞–π—Ç–µ –∫–µ—à** –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –∏–≥—Ä—ã\n4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∫–µ—à–∞** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é\n\n### –ü—Ä–∏–º–µ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è\n\n```typescript\n// –í –Ω–∞—á–∞–ª–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\nuseEffect(() => {\n  // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–ø—Ä–∞–π—Ç—ã UI\n  const uiSprites = [iconSprite, logoSprite, buttonSprite];\n  UnnyObject.preloadSprites(uiSprites);\n}, []);\n\n// –ü—Ä–∏ —Å–º–µ–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\nconst logout = () => {\n  UnnyObject.clearSpriteCache();\n  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã—Ö–æ–¥–∞\n};\n\n// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö\nconst StoreItem = ({ item }) => {\n  const { spriteUrl, isLoading, error } = useCachedSprite(item.sprite);\n  \n  return (\n    <div className=\"store-item\">\n      {isLoading && <Skeleton />}\n      <img src={spriteUrl} onError={handleImageError} />\n    </div>\n  );\n};\n```\n\n## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫\n\n- **–°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ getFullUrl()\n- **IndexDB –æ—à–∏–±–∫–∏** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ + fallback  \n- **Blob URL –æ—à–∏–±–∫–∏** - –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ URL\n- **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Blob URLs\n\n## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥\n\n```typescript\n// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–µ—à–∞\nconsole.log('–ö–µ—à–∏—Ä–æ–≤–∞–Ω–æ —Å–ø—Ä–∞–π—Ç–æ–≤:', UnnyObject.spriteCache.size);\n\n// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫\nconst { error } = useCachedSprite(sprite);\nif (error) {\n  analytics.track('sprite_cache_error', { error, spriteId: sprite.id });\n}\n```\n\n–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø—Ä–∞–π—Ç–æ–≤! üöÄ"